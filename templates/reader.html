<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading - Manga Library</title>
    <link rel="stylesheet" href="/static/css/reader.css">
</head>
<body>
    <div class="reader-container">
        <!-- Navigation Bar -->
        <nav class="reader-nav">
            <div class="nav-left">
                <button id="backBtn" class="nav-btn">‚Üê Back</button>
                <span id="seriesTitle" class="series-title"></span>
            </div>
            <div class="nav-center">
                <span id="chapterInfo" class="chapter-info"></span>
            </div>
            <div class="nav-right">
                <button id="settingsBtn" class="nav-btn settings-btn">‚öôÔ∏è Settings</button>
                <button id="prevChapterBtn" class="nav-btn" style="display: none;">‚Üê Prev</button>
                <button id="nextChapterBtn" class="nav-btn" style="display: none;">Next ‚Üí</button>
            </div>
        </nav>

        <!-- Loading State -->
        <div id="loading" class="loading">Loading chapter...</div>
        
        <!-- Reader Content - Scroll Mode -->
        <div id="scrollReader" class="scroll-reader" style="display: none;">
            <div id="scrollPageContainer" class="scroll-page-container"></div>
        </div>

        <!-- Reader Content - Single Page Mode -->
        <div id="singleReader" class="single-reader" style="display: none;">
            <div id="singlePageContainer" class="single-page-container">
                <div class="page-image-wrapper">
                    <img id="currentPageImg" class="current-page-img" src="" alt="Page">
                </div>
            </div>
            <div class="single-page-controls">
                <button id="prevPageBtn" class="page-nav-btn">‚Üê Previous</button>
                <span id="pageCounter" class="page-counter"></span>
                <button id="nextPageBtn" class="page-nav-btn">Next ‚Üí</button>
            </div>
        </div>

        <!-- Reader Content - Dual Page Mode -->
        <div id="dualReader" class="dual-reader" style="display: none;">
            <div id="dualPageContainer" class="dual-page-container">
                <div id="dualPageWrapper" class="dual-page-wrapper">
                    <img id="rightPageImg" class="dual-page-img" src="" alt="Right Page" style="display: none;">
                    <img id="leftPageImg" class="dual-page-img" src="" alt="Left Page" style="display: none;">
                </div>
            </div>
            <div class="single-page-controls">
                <button id="prevPairBtn" class="page-nav-btn">‚Üê Previous</button>
                <span id="pairCounter" class="page-counter"></span>
                <button id="nextPairBtn" class="page-nav-btn">Next ‚Üí</button>
            </div>
        </div>

        <!-- Footer -->
        <div class="reader-footer">
            <div id="pageIndicator" class="page-indicator"></div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel">
        <div class="settings-content">
            <div class="settings-header">
                <h2>‚öôÔ∏è Reader Settings</h2>
                <button id="closeSettings" class="close-btn">√ó</button>
            </div>
            
            <div class="settings-body">
                <!-- Reader Mode -->
                <div class="setting-group">
                    <label class="setting-label">Reader Mode</label>
                    <div class="setting-options">
                        <button class="setting-option active" data-setting="reader_mode" data-value="scroll">
                            <span class="option-icon">üìú</span>
                            <div class="option-content">
                                <span class="option-label">Scrolling</span>
                                <span class="option-desc">Vertical continuous scroll</span>
                            </div>
                        </button>
                        <button class="setting-option" data-setting="reader_mode" data-value="single">
                            <span class="option-icon">üìÑ</span>
                            <div class="option-content">
                                <span class="option-label">Single Page</span>
                                <span class="option-desc">One page at a time</span>
                            </div>
                        </button>
                        <button class="setting-option" data-setting="reader_mode" data-value="dual">
                            <span class="option-icon">üìñ</span>
                            <div class="option-content">
                                <span class="option-label">Dual Page</span>
                                <span class="option-desc">Two pages side-by-side (RTL)</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Reading Direction (for single page mode) -->
                <div class="setting-group" id="directionSetting">
                    <label class="setting-label">Reading Direction (Single Page Mode)</label>
                    <div class="setting-options">
                        <button class="setting-option active" data-setting="reading_direction" data-value="ltr">
                            <span class="option-icon">‚Üí</span>
                            <div class="option-content">
                                <span class="option-label">Left to Right</span>
                                <span class="option-desc">Click right to go forward</span>
                            </div>
                        </button>
                        <button class="setting-option" data-setting="reading_direction" data-value="rtl">
                            <span class="option-icon">‚Üê</span>
                            <div class="option-content">
                                <span class="option-label">Right to Left</span>
                                <span class="option-desc">Click left to go forward</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Fit Mode -->
                <div class="setting-group" id="fitModeSetting">
                    <label class="setting-label">Image Fit</label>
                    <div class="setting-options">
                        <button class="setting-option active" data-setting="fit_mode" data-value="width">
                            <span class="option-icon">‚ÜîÔ∏è</span>
                            <span class="option-label">Fit Width</span>
                        </button>
                        <button class="setting-option" data-setting="fit_mode" data-value="height">
                            <span class="option-icon">‚ÜïÔ∏è</span>
                            <span class="option-label">Fit Height</span>
                        </button>
                        <button class="setting-option" data-setting="fit_mode" data-value="original">
                            <span class="option-icon">üîç</span>
                            <span class="option-label">Original Size</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="settings-footer">
                <button id="resetSettings" class="reset-btn">Reset to Defaults</button>
            </div>
        </div>
    </div>

    <script>
        const seriesName = "{{ series_name }}";
        const chapterNum = "{{ chapter_num }}";
    </script>
    <script src="/static/js/reader.js"></script>
</body>
</html>